<!-- Universal Date Picker -->
<div id="datepicker">
<el-row>
  <el-date-picker
    size="medium"
    v-model="value"
    value-format="yyyy-MM-dd"
    :type="dateFormat"
    :format="dateFormatFormat"
    placeholder="Pick a day">
    {{ value }}
  </el-date-picker>
  <el-radio-group v-model="dateFormat" size="medium">
    <el-radio-button label="date">Date</el-radio-button>
    <el-radio-button label="year">Year</el-radio-button>
  </el-radio-group>
</el-row>
<input type="hidden" id="<?= $id ?>" name="<?= $name ?>" >
</div>
<!-- Universal Date Picker -->

<script type="text/javascript">
var  ElementUI = ELEMENT;
ElementUI.locale(ElementUI.lang.ruRU)

Vue.use(ElementUI);

const DatePicker = new Vue({
  el: '#datepicker',
  data() {
    return {
      dateFormat: 'date',
      dateFormatFormat: 'dd.MM.yyyy',
      value: '',
    };
  },
  mounted: function() {
      this.value = '<?= $value ?>';
      if (this.value.slice(5,10) == '00-00') {
        this.dateFormat = 'year'
      }
  },
  watch: {
    value: function(val) {
      if (this.dateFormat == 'year') {
        val = val.slice(0,4) + '-00-00';
      }
      $('#<?= $id ?>').val(val);
    },
    dateFormat: function(val) {
      if (val == 'year') {
        this.dateFormatFormat = 'yyyy';
      } else {
        this.dateFormatFormat = 'dd.MM.yyyy';
      }
    }
  } 

});
</script>